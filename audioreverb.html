<!doctype html>
<meta charset="utf-8">
<title>Sound2Care.js</title>
<head>

    <style>
        .slidecontainer {
            width: 50%;
            margin-left: auto !important;
            margin-right: auto !important;
            text-align:center;
        }
        
        .slider {
          -webkit-appearance: none;
          width: 100%;
          height: 25px;
          background: #d3d3d3;
          outline: none;
          opacity: 0.7;
          -webkit-transition: .2s;
          transition: opacity .2s;
        }
        
        .slider:hover {
          opacity: 1;
        }
        
        .slider::-webkit-slider-thumb {
          -webkit-appearance: none;
          appearance: none;
          width: 25px;
          height: 25px;
          background: #04AA6D;
          cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
          width: 25px;
          height: 25px;
          background: #04AA6D;
          cursor: pointer;
        }

        .button {
            text-align: center;
        }
    </style>
</head>
<body>
<h1 style="text-align: center"> Audio Reverb </h1>

<audio src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/858/outfoxing.mp3" crossorigin="anonymous" ></audio>

<div class="slidecontainer">
  <input type="range" min="0" max="100" value="0" class="slider" id="myRange"/>
</div>
<p style="text-align: center">Value: <span id="demo"></span></p>
<div class="button">
<button id="playReverb" >Play</button>
</div>

<script src="./reverb.umd.js"></script>
<script>

  // const reverb = new Reverb(ctx, {
  //   noise: 0, // Inpulse Response Noise algorithm (0: White noise, 1: Pink noise, 2: Brown noise)
  //   decay: 5, // Amount of IR (Inpulse Response) decay. 0~100
  //   delay: 0, // Delay time o IR. (NOT delay effect) 0~100 [sec]
  //   filterFreq: 2200, // Filter frequency. 20~5000 [Hz]
  //   filterQ: 1, // Filter quality. 0~10
  //   filterType: 'lowpass', // Filter type. 'bandpass' etc. See https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode/type .
  //   mix: 0.5, // Dry (Original Sound) and Wet (Effected sound) raito. 0~1
  //   reverse: false, // Reverse IR.
  //   time: 3, // Time length of IR. 0~50 [sec]
  // });

  var slider = document.getElementById("myRange");
  var output = document.getElementById("demo");
  output.innerHTML = slider.value; // Display the default slider value

  // Update the current slider value (each time you drag the slider handle)
  slider.oninput = function() {
    output.innerHTML = this.value;
  }
  // Setup Audio Context
  const AudioCtx = new AudioContext();

  // Setup Reverb Class
  const reverb = new Reverb(AudioCtx, {
    noise: 2, // Inpulse Response Noise algorithm (0: White noise, 1: Pink noise, 2: Brown noise)
    decay: 100, // Amount of IR (Inpulse Response) decay. 0~100
    delay: 0, // Delay time o IR. (NOT delay effect) 0~100 [sec]
    filterFreq: 5000, // Filter frequency. 20~5000 [Hz]
    filterQ: 10, // Filter quality. 0~10
    filterType: 'lowpass', // Filter type. 'bandpass' etc. See https://developer.mozilla.org/en-US/docs/Web/API/BiquadFilterNode/type .
    mix: 0.5, // Dry (Original Sound) and Wet (Effected sound) raito. 0~1
    reverse: false, // Reverse IR.
    time: 3, // Time length of IR. 0~50 [sec]
  });
  console.info(
    'Reverb.js loaded. (version:' +
    reverb.version +
    ' / build: ' +
    reverb.build +
    ')'
  );
  const audioElement = document.querySelector('audio');
  const track = AudioCtx.createMediaElementSource(audioElement);
  // Connect Reverb
  reverb.connect(track);
  track.connect(AudioCtx.destination);

  // fire
  audioElement.play();
</script>
</body>